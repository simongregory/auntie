#!/usr/bin/env ruby

require 'bbc'

channels = {
  :one => { :id => 'bbcone', :region => '/london' },
  :two => { :id => 'bbctwo', :region => '/england' },
  :three => { :id => 'bbcthree' },
  :four => { :id => 'bbcfour' },
  :cbeebies => { :id => 'cbeebies' },
  :cbbc => { :id => 'cbbc' },
  :hd => { :id => 'bbchd' },
  :news => { :id => 'bbcnews' },
  :parliament => { :id => 'parliament' },
}

channel = ARGV[0] || :one

if ARGV[0] == 'help' && ARGV[1] == '-c'
  channels.each { |k,v| puts k }
  puts "now\nnext"
  exit
end

helps = ['help', '-h', '--help']

if helps.include? ARGV[0]
  puts 'Useage: tv <channel>'
  exit
end

if ARGV[0] == 'now'
  NowNext.new('tv').now
  exit
end

if ARGV[0] == 'next'
  NowNext.new('tv').next
  exit
end

if channels.has_key? channel.to_sym
  Schedule.new channels[channel.to_sym]
else
  puts "'#{channel}' is an unknown channel"
end
